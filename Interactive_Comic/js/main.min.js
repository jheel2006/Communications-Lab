window.onbeforeunload=function(){window.scrollTo(0,0)};var resize=function(){windowWidth=window.innerWidth,windowHeight=window.innerHeight};resize(),$(window).on("resize",resize);var scene1_trigger=!1,scene2_trigger=!1,scene3_trigger=!1,scene4_trigger=!1,scene5_trigger=!1,scene6_trigger=!1,scene7_trigger=!1,scene8_trigger=!1,sceneend_trigger=!1,windowScrollable=!1,$window=$(window),scrollTime=.6,scrollDistance=200;window.mobilecheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},-1!=navigator.appVersion.indexOf("Win")&&$("html").addClass("ie"),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var siteUrl=window.location.host,shareAccount="sciencemagazine",shareUrl=window.location.origin+window.location.pathname,shareString="Text. Via @"+shareAccount,shareStringWithHash="Text. #Hash Via @"+shareAccount;function shareFb(){window.mobilecheck()?window.open("https://www.facebook.com/dialog/share_open_graph?app_id=355911134593287&display=page&action_type=og.likes&action_properties=%7B%22object%22%3A%22http%3A%2F%2Fwww.sciencemag.org%2Fsite%2Fspecial%2Fgeneralrelativity%22%7D&redirect_uri=http%3A%2F%2Fwww.sciencemag.org%2Fsite%2Fspecial%2Fgeneralrelativity"):FB.ui({method:"share",name:"General Relativity 100th Anniversary",href:"http://www.sciencemag.org/site/special/generalrelativity"})}function shareTwitter(){window.open("https://twitter.com/intent/tweet?url="+shareUrl+"&text="+shareString+"&hashtags=GeneralRelativity","","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=550,height=420")}function shareMail(){document.location.href="mailto:?subject="+shareStringWithHash+"&body="+shareUrl}if($("#grc-fb-share").on("click",function(){shareFb()}),$("#grc-tw-share").on("click",function(){shareTwitter()}),$(function(){windowScrollable&&$window.on("mousewheel DOMMouseScroll",function(e){e.preventDefault();var t=e.originalEvent.wheelDelta/120||-e.originalEvent.detail/3,o=$window.scrollTop()-parseInt(t*scrollDistance);TweenMax.to($window,scrollTime,{scrollTo:{y:o,autoKill:!0},ease:Power1.easeOut,overwrite:5})})}),!1===window.mobilecheck()){var e,t=new ScrollMagic,o=!0;$("#grc-toggle-sound").on("click",function(){(o=!o)?s.play().loop():buzz.all().stop(),"On"==$(this).html()?$(this).html("Off"):$(this).html("On")}),$(document).trigger("setScene",{scene:"Loader Screen Complete"}),buzz.defaults.formats=["ogg","mp3"];var s=new buzz.sound("sounds/opener-loop");o&&s.play().loop();var n=20625,a=new SteppedEase(25);TweenMax.set(".grc-section-1",{backgroundColor:"transparent"}),TweenMax.set(".grc-section-2-bg-stars",{opacity:0}),TweenMax.set(".grc-section-2-text",{opacity:0,css:{autoAlpha:0},y:"10%"});var i=new TimelineMax().add([TweenMax.to(".grc-section-1-scale-wrapper",5,{y:"-5%"}),TweenMax.to(".grc-section-2-bg",5,{backgroundColor:"#001d23"}),TweenMax.to(".grc-section-2-bg-stars",5,{opacity:1})]),c=new TimelineMax({delay:4}).add([TweenMax.to(".grc-section-1-book-cover-2",1.5,{backgroundPosition:"-"+n+"px 0px",ease:a})]).add([TweenMax.to(".grc-section-1-scale-wrapper",3,{scale:5,x:"20%",opacity:0})]).add([TweenMax.to(".grc-section-2-text",2.5,{opacity:1,css:{autoAlpha:1},y:"0%",onStart:function(){$(".grc-section-2-character").addClass("animated"),scene2_trigger||($(document).trigger("setScene",{scene:"Scene 2: Floating"}),scene2_trigger=!0,console.log("s2 trigger"))}})]).add([TweenMax.to(".grc-section-2-text",5,{})]),r=new ScrollScene({duration:3e3,triggerElement:".grc-section-1",triggerHook:"0"}).setPin(".grc-section-1").setTween([c,i]);r.on("enter",function(){scene1_trigger||($(document).trigger("setScene",{scene:"Scene 1: Cover"}),scene1_trigger=!0,console.log("s1 trigger"))}),TweenMax.set(".grc-section-2",{position:"fixed",top:"0","z-index":"-1"});var g=new ScrollScene({duration:1e3,triggerElement:".grc-section-2",triggerHook:"0"});r.on("progress",function(e){"REVERSE"==e.scrollDirection&&$(".grc-section-2-character").removeClass("animated")}),TweenMax.set(".section3",{position:"fixed",top:"0","z-index":"-1"});var l=new ScrollScene({duration:1e3,triggerElement:".section3",triggerHook:"0"});l.on("progress",function(e){"REVERSE"==e.scrollDirection&&$(".section3-text").removeClass("animated")}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".grc-section-2"),t=document.querySelector(".fade-in-picture");window.addEventListener("scroll",function(){let o=e.getBoundingClientRect().bottom;o<=0&&t.classList.add("fade-in")})});var d=new buzz.sound("sounds/traffic-loop");$(".grc-section-3-panel-left-bg").attr("src","img/s3-panel-left-bg.png"),$(".grc-section-3-panel-left-vehicles-container, .grc-section-3-panel-left-char, .grc-section-3-panel-right-char").show(),$(".grc-section-3-panel-right-bg").attr("src","img/s3-panel-right-bg.png"),TweenMax.set(".grc-section-3-panel-left",{x:"25%"}),TweenMax.set(".grc-section-3-panel-right",{opacity:0,x:"50%"}),TweenMax.set(".grc-section-3-panel-left-bubble",{scale:.5,opacity:0}),TweenMax.set(".grc-section-3-panel-right-bubble",{scale:.5,opacity:0}),TweenMax.set(".grc-section-3-panel-right-char",{y:"-150%"}),$(".grc-section-3").css({"min-height":windowHeight});var p=$(".grc-section-3-panel-left-vehicles"),h=$(".grc-section-3-panel-right-bg-repeat"),_=$(".grc-section-3-panel-left-char"),u=$(".grc-section-3-panel-right-char"),f=$(".grc-section-3-panel-left-bubble"),m=$(".grc-section-3-panel-right-bubble"),w=TweenMax.to(p,6,{x:"1000",repeat:-1,ease:Linear.easeNone});w.pause();var b=new TimelineMax().add([TweenMax.to(".grc-section-3-panel-left",3,{x:"0%"}),TweenMax.to(".grc-section-3-panel-left-bubble",3,{scale:1,opacity:1}),TweenMax.to(_,3,{top:"49%",left:"23%"})]).add([TweenMax.to(".grc-section-3-panel-right",3,{x:"0%",opacity:1})]).add([TweenMax.to(u,3,{y:"0%"})]).add([TweenMax.to(".grc-section-3-panel-right-bubble",3,{scale:1,opacity:1})]),l=new ScrollScene({duration:1e3,triggerElement:".grc-section-3",triggerHook:"0"}).setPin(".grc-section-3").setTween(b);l.on("enter",function(e){w.play(),$(h).addClass("animated"),"FORWARD"==e.scrollDirection&&(s.fadeOut(2e3),o&&d.fadeIn().loop()),scene3_trigger||($(document).trigger("setScene",{scene:"Scene 3: City"}),scene3_trigger=!0,console.log("s3 trigger"))}),l.on("leave",function(e){w.pause(),$(h).removeClass("animated"),"REVERSE"==e.scrollDirection&&(o&&s.play().loop(),d.pause())});var v=$(".grc-section-4-bubble"),y=$(".grc-section-4-text");TweenMax.set(v,{opacity:0,scale:.5,css:{autoAlpha:0}}),TweenMax.set(y,{opacity:0,y:"-10%"}),TweenMax.set(".grc-section-4-bg",{scale:4}),TweenMax.set(".grc-section-4-char",{scale:4}),$(".grc-section-4").css({height:windowHeight});var x=new TimelineMax().add([TweenMax.to(".grc-section-4-bg",1,{scale:1}),TweenMax.to(".grc-section-4-char",1,{scale:1})]).add([TweenMax.to(y,1,{opacity:1,y:"0%"})]).add([TweenMax.to(v,1,{opacity:1,scale:1,css:{autoAlpha:1}})]),k=new ScrollScene({duration:1e3,triggerElement:".grc-section-4",triggerHook:"0"}).setTween(x).setPin(".grc-section-4");k.on("enter",function(e){"FORWARD"==e.scrollDirection&&TweenMax.set(".grc-section-2",{position:"absolute"}),scene4_trigger||($(document).trigger("setScene",{scene:"Scene 4: Paradox"}),scene4_trigger=!0,console.log("s4 trigger"))}),k.on("leave",function(e){"REVERSE"==e.scrollDirection&&TweenMax.set(".grc-section-2",{position:"fixed"})}),$(".grc-section-5-text-warp").hide(),$(".grc-section-5-text-warp-animation").css({display:"inline-block"}),TweenMax.set(".grc-section-5-building-1",{y:"20%"}),TweenMax.set(".grc-section-5-building-2",{y:"20%"}),TweenMax.set(".grc-section-5-char",{y:"10%"}),TweenMax.set(".grc-section-5-text",{opacity:0,y:"20%"});var D=2400,S=new SteppedEase(6),E=$(".grc-section-5-building-1"),N=$(".grc-section-5-building-2"),q=$(".grc-section-5-char"),z=new TimelineMax().add([TweenMax.to(E,3,{scale:1.15,x:"5%",y:"0%"}),TweenMax.to(N,3,{scale:1.15,x:"-5%",y:"0%"}),TweenMax.to(q,3,{y:"0%"})]),R=new TimelineMax().add([TweenMax.to(".grc-section-5-text-warp-animation",1.5,{backgroundPosition:"-"+D+"px 0px",ease:S})]).add([TweenMax.to(".grc-section-5-text",3,{opacity:1,y:"0%"})]),C=new ScrollScene({duration:1e3,triggerElement:".grc-section-5",triggerHook:"0"}).setTween([R,z]).setPin(".grc-section-5");C.on("enter",function(){scene5_trigger||($(document).trigger("setScene",{scene:"Scene 5: Warped"}),scene5_trigger=!0,console.log("s5 trigger"))}),$(".grc-section-5-text-warp").hide(),$(".grc-section-5-text-warp-animation").css({display:"inline-block"}),TweenMax.set(".grc-section-6-building-1",{y:"20%"}),TweenMax.set(".grc-section-6-building-2",{y:"20%"}),TweenMax.set(".grc-section-6-char",{y:"10%"}),TweenMax.set(".grc-section-6-text",{opacity:0,y:"20%"});var F=2400,T=new SteppedEase(6),A=$(".grc-section-6-building-1"),H=$(".grc-section-6-building-2"),O=$(".grc-section-6-char"),P=new TimelineMax().add([TweenMax.to(E,3,{scale:1.15,x:"5%",y:"0%"}),TweenMax.to(N,3,{scale:1.15,x:"-5%",y:"0%"}),TweenMax.to(q,3,{y:"0%"})]),W=new TimelineMax().add([TweenMax.to(".grc-section-5-text-warp-animation",1.5,{backgroundPosition:"-"+D+"px 0px",ease:S})]).add([TweenMax.to(".grc-section-6-text",3,{opacity:1,y:"0%"})]),j=new ScrollScene({duration:1e3,triggerElement:".grc-section-6",triggerHook:"0"}).setTween([W,P]).setPin(".grc-section-6");j.on("enter",function(){scene6_trigger||($(document).trigger("setScene",{scene:"Scene 6: Warped"}),scene5_trigger=!0,console.log("s6 trigger"))});var V=new buzz.sound("sounds/chalk-loop"),L=new buzz.sound("sounds/equationscosmos");function M(e){var t=e[0].getTotalLength();e.css("stroke-dasharray",t),e.css("stroke-dashoffset",t)}$(".grc-section-7-main-equation").hide(),$("#s7-svg").show(),$(".grc-section-7-equation-1, .grc-section-7-equation-2, .grc-section-7-equation-3, .grc-section-7-equation-4, .grc-section-7-equation-5").css({width:"0%",overflow:"hidden"}),TweenMax.set(".grc-section-7-text-2",{opacity:0}),TweenMax.set(".grc-section-7-text-3",{opacity:0});var U=$("#s7-svg-path-1"),B=$("#s7-svg-path-2"),G=$("#s7-svg-path-3"),I=$("#s7-svg-path-4"),K=$("#s7-svg-path-5"),J=$("#s7-svg-path-6"),Q=$("#s7-svg-path-7"),X=$("#s7-svg-path-8"),Y=$("#s7-svg-path-9"),Z=$("#s7-svg-path-10"),ee=$("#s7-svg-path-11"),et=$("#s7-svg-path-12"),eo=$("#s7-svg-path-13"),es=$("#s7-svg-path-14"),en=$("#s7-svg-path-15"),ea=$("#s7-svg-path-16"),ei=$("#s7-svg-path-17"),ec=$("#s7-svg-path-18"),er=$("#s7-svg-path-19"),eg=$("#s7-svg-path-20"),el=$("#s7-svg-path-21"),e$=$("#s7-svg-path-22"),ed=$("#s7-svg-path-23"),ep=$("#s7-svg-path-24");M(U),M(B),M(G),M(I),M(K),M(J),M(Q),M(X),M(Y),M(Z),M(ee),M(et),M(eo),M(es),M(en),M(ea),M(ei),M(ec),M(er),M(eg),M(el),M(e$),M(ed),M(ep);var eh=$(".grc-section-7-text-1"),e_=$(".grc-section-7-chair"),eu=$(".grc-section-7-text-2"),ef=$(".grc-section-7-text-3"),e3=$(".grc-section-7-equation-container"),em=$(".grc-section-7-equation-1"),ew=$(".grc-section-7-equation-2"),e0=$(".grc-section-7-equation-3"),eb=$(".grc-section-7-equation-4"),ev=$(".grc-section-7-equation-5"),ey=$(".grc-section-7-char"),e1=$(".grc-section-7-cosmos-container"),ex=$("#s7-svg"),ek=$(".grc-section-7-blackhole"),e5=$(".grc-section-7-jupiter"),eD=$(".grc-section-7-planet"),e2=$(".grc-section-7-comet");TweenMax.set(e2,{x:"100%"}),TweenMax.set(".grc-section-end",{opacity:0});var eS=new TimelineMax().add([TweenMax.to(e_,2,{x:"-10%"}),TweenMax.to(ey,10,{x:"-10%"}),TweenMax.to(em,10,{x:"-10%",onStart:function(){o&&V.isPaused()&&V.play().loop()}}),TweenMax.to(ew,10,{x:"-10%"}),TweenMax.to(e0,10,{x:"-10%"}),TweenMax.to(eb,10,{x:"-10%"}),TweenMax.to(ev,10,{x:"-10%"})]),e8=new TimelineMax().add([TweenMax.to(em,2.5,{width:"100%"})]).add([TweenMax.to(ew,2.5,{width:"100%"})]).add([TweenMax.to(e0,2.5,{width:"100%"})]).add([TweenMax.to(eb,2.5,{width:"100%"})]).add([TweenMax.to(ev,2.5,{width:"100%"})]).add(TweenMax.to(U,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(B,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(G,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(I,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(K,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(J,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(Q,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(X,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(Y,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(Z,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ee,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(et,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(eo,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(es,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(en,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ea,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ei,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ec,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(er,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(eg,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(el,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(e$,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ed,.5,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to(ep,2,{strokeDashoffset:0,ease:Linear.easeNone,onComplete:function(){"FORWARD"==e&&V.pause()}})).add([TweenMax.to(eh,2.5,{opacity:0,x:"-100%"}),TweenMax.to(eu,2.5,{opacity:1})]).add([TweenMax.to(ex,5,{x:"-10%"}),TweenMax.to(e3,5,{x:"-10%"}),TweenMax.to(e_,2.5,{x:"-10%"}),]).add([TweenMax.to(ex,5,{x:"-200%",onStart:function(){o&&L.play(),console.log("playing s8Sound")}}),TweenMax.to(e_,2.5,{opacity:0,x:"-100%"}),TweenMax.to(e3,5,{x:"-200%"}),TweenMax.to(e1,5,{left:"0%",onComplete:function(){console.log("entered cosmos"),scene8_trigger||($(document).trigger("setScene",{scene:"Scene 8: Cosmos"}),scene8_trigger=!0,console.log("s8 trigger"))}})]).add([TweenMax.to(ex,5,{x:"-200%"}),TweenMax.to(e3,5,{x:"-200%"}),TweenMax.to(e1,5,{left:"0%"}),TweenMax.to(ek,5,{x:"-2%"}),TweenMax.to(e5,5,{x:"-15%"}),TweenMax.to(eD,5,{x:"-2%"}),TweenMax.to(e2,5,{x:"-50%"}),]).add([TweenMax.to(ef,5,{x:"-10%",opacity:1})]).add([TweenMax.to(ef,5,{})]).add([TweenMax.to(ef,3,{opacity:0})]).add([TweenMax.to(".grc-section-end",3,{opacity:1})]),e4=new ScrollScene({duration:4e3,triggerElement:".grc-section-7",triggerHook:"0"}).setPin(".grc-section-7").setTween([e8,eS]);e4.on("progress",function(t){e=t.scrollDirection}),e4.on("enter",function(){scene7_trigger||($(document).trigger("setScene",{scene:"Scene 7: Equations"}),scene7_trigger=!0,console.log("s7 trigger"))}),L.bind("ended",function(){s.fadeIn(300).stop().play().loop(),console.log("s1Sound ended")}),t.addScene([r,g,l,k,C,j,e4])}